<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Free online tool to compress your images while maintaining quality. Reduce file size for JPG, PNG, and WebP images quickly and easily.">
    <title>ImageCompress Pro | Smart Online Image Compression</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4361ee;
            --primary-light: #e0e7ff;
            --secondary: #3f37c9;
            --accent: #f72585;
            --dark: #212529;
            --gray: #6c757d;
            --light-gray: #f8f9fa;
            --white: #ffffff;
            --success: #4cc9f0;
            --warning: #f8961e;
            --error: #ef233c;
            --border-radius: 12px;
            --box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--dark);
            background-color: var(--light-gray);
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--white);
            padding: 2rem 0;
            margin-bottom: 2rem;
            box-shadow: var(--box-shadow);
        }

        .header-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .logo {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }

        .logo-icon {
            font-size: 2.5rem;
            margin-right: 0.75rem;
        }

        .logo-text {
            font-size: 1.75rem;
            font-weight: 700;
        }

        .tagline {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 600px;
            margin-bottom: 1.5rem;
        }

        /* Main Layout */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 2rem;
            margin-bottom: 3rem;
        }

        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Compression Tool */
        .tool-card {
            background: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            overflow: hidden;
            transition: var(--transition);
        }

        .tool-header {
            padding: 1.5rem;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            background-color: var(--primary-light);
        }

        .tool-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--primary);
            display: flex;
            align-items: center;
        }

        .tool-title svg {
            margin-right: 0.5rem;
        }

        .tool-body {
            padding: 1.5rem;
        }

        /* Upload Area */
        .upload-area {
            border: 2px dashed var(--gray);
            border-radius: var(--border-radius);
            padding: 3rem 1rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 1.5rem;
            background-color: var(--light-gray);
            position: relative;
            overflow: hidden;
        }

        .upload-area:hover {
            border-color: var(--primary);
            background-color: rgba(67, 97, 238, 0.05);
        }

        .upload-area.active {
            border-color: var(--success);
            background-color: rgba(76, 201, 240, 0.05);
        }

        .upload-icon {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .upload-text h3 {
            font-size: 1.25rem;
            margin-bottom: 0.5rem;
            color: var(--dark);
        }

        .upload-text p {
            color: var(--gray);
        }

        .file-input {
            display: none;
        }

        /* Controls */
        .control-group {
            margin-bottom: 1.5rem;
        }

        .control-label {
            display: block;
            margin-bottom: 0.75rem;
            font-weight: 500;
            color: var(--dark);
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .slider {
            flex: 1;
            -webkit-appearance: none;
            height: 8px;
            border-radius: 4px;
            background: #e9ecef;
            outline: none;
            transition: var(--transition);
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            transition: var(--transition);
            border: 3px solid var(--white);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .slider::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            background: var(--secondary);
        }

        .slider-value {
            width: 50px;
            text-align: center;
            font-weight: 600;
            color: var(--primary);
            background: var(--primary-light);
            padding: 0.25rem 0.5rem;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        /* Format Options */
        .format-options {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-top: 0.5rem;
        }

        .format-option {
            position: relative;
        }

        .format-option input {
            position: absolute;
            opacity: 0;
        }

        .format-option label {
            display: block;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            background-color: var(--light-gray);
            color: var(--gray);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid #dee2e6;
        }

        .format-option input:checked + label {
            background-color: var(--primary);
            color: var(--white);
            border-color: var(--primary);
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.75rem 1.5rem;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            font-size: 1rem;
            text-align: center;
        }

        .btn-primary {
            background-color: var(--primary);
            color: var(--white);
            width: 100%;
        }

        .btn-primary:hover {
            background-color: var(--secondary);
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .btn-primary:disabled {
            background-color: #adb5bd;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-success {
            background-color: var(--success);
            color: var(--white);
            width: 100%;
        }

        .btn-success:hover {
            background-color: #3aa8d8;
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .btn-icon {
            margin-right: 0.5rem;
        }

        /* Loading State */
        .loading {
            display: none;
            text-align: center;
            padding: 2rem;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(67, 97, 238, 0.1);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            font-weight: 500;
            color: var(--gray);
        }

        /* Results */
        .results {
            display: none;
            margin-top: 1.5rem;
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .results-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--primary);
        }

        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        @media (max-width: 576px) {
            .comparison {
                grid-template-columns: 1fr;
            }
        }

        .image-card {
            background: var(--light-gray);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .image-card-header {
            padding: 0.75rem 1rem;
            background-color: var(--primary-light);
            color: var(--primary);
            font-weight: 600;
            font-size: 0.9rem;
        }

        .image-preview {
            width: 100%;
            height: 200px;
            object-fit: contain;
            background: var(--white);
            padding: 1rem;
        }

        .image-stats {
            padding: 0.75rem 1rem;
            font-size: 0.9rem;
            color: var(--gray);
            border-top: 1px solid rgba(0, 0, 0, 0.05);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin: 1.5rem 0;
        }

        @media (max-width: 576px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }

        .stat-card {
            background: var(--white);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .stat-value {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.25rem;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--gray);
        }

        /* Ad Section */
        .ad-section {
            position: sticky;
            top: 20px;
        }

        .ad-card {
            background: var(--white);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--box-shadow);
            margin-bottom: 1.5rem;
        }

        .ad-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--gray);
            text-align: center;
            margin-bottom: 0.5rem;
        }

        .ad-container {
            min-height: 250px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--light-gray);
            padding: 1rem;
        }

        /* Footer */
        footer {
            background: var(--dark);
            color: var(--white);
            padding: 2rem 0;
            margin-top: 3rem;
        }

        .footer-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .footer-links {
            display: flex;
            gap: 1.5rem;
            margin: 1rem 0;
        }

        .footer-link {
            color: var(--white);
            opacity: 0.8;
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-link:hover {
            opacity: 1;
            color: var(--primary-light);
        }

        .copyright {
            opacity: 0.6;
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        /* Responsive Adjustments */
        @media (max-width: 576px) {
            .header-content {
                padding: 0 1rem;
            }
            
            .tool-body {
                padding: 1rem;
            }
            
            .upload-area {
                padding: 2rem 1rem;
            }
            
            .stat-card {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">📷</span>
                    <span class="logo-text">ImageCompress Pro</span>
                </div>
                <p class="tagline">Optimize your images with our advanced compression technology. Faster load times, smaller files, same great quality.</p>
            </div>
        </div>
    </header>

    <main class="container">
        <div class="main-grid">
            <div class="tool-card">
                <div class="tool-header">
                    <h2 class="tool-title">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M4 16L8.586 11.414C8.961 11.039 9.47 10.828 10 10.828C10.53 10.828 11.039 11.039 11.414 11.414L16 16M14 14L15.586 12.414C15.961 12.039 16.47 11.828 17 11.828C17.53 11.828 18.039 12.039 18.414 12.414L20 14M14 8H14.01M6 20H18C19.105 20 20 19.105 20 18V6C20 4.895 19.105 4 18 4H6C4.895 4 4 4.895 4 6V18C4 19.105 4.895 20 6 20Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Image Compressor
                    </h2>
                </div>
                <div class="tool-body">
                    <div class="upload-area" id="dropArea">
                        <div class="upload-icon">📤</div>
                        <div class="upload-text">
                            <h3>Drag & Drop Your Image Here</h3>
                            <p>or click to browse files (Supports JPG, PNG, WebP)</p>
                        </div>
                        <input type="file" id="fileInput" class="file-input" accept="image/jpeg, image/png, image/webp">
                    </div>

                    <div class="control-group">
                        <label for="qualitySlider" class="control-label">Compression Quality</label>
                        <div class="slider-container">
                            <input type="range" min="1" max="100" value="80" class="slider" id="qualitySlider">
                            <span class="slider-value" id="qualityValue">80%</span>
                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label">Output Format</label>
                        <div class="format-options">
                            <div class="format-option">
                                <input type="radio" id="formatOriginal" name="outputFormat" value="original" checked>
                                <label for="formatOriginal">Original</label>
                            </div>
                            <div class="format-option">
                                <input type="radio" id="formatJpg" name="outputFormat" value="jpg">
                                <label for="formatJpg">JPG</label>
                            </div>
                            <div class="format-option">
                                <input type="radio" id="formatPng" name="outputFormat" value="png">
                                <label for="formatPng">PNG</label>
                            </div>
                            <div class="format-option">
                                <input type="radio" id="formatWebp" name="outputFormat" value="webp">
                                <label for="formatWebp">WebP</label>
                            </div>
                        </div>
                    </div>

                    <button id="compressBtn" class="btn btn-primary" disabled>
                        <span class="btn-icon">⚡</span> Compress Image
                    </button>

                    <div class="loading" id="loadingIndicator">
                        <div class="spinner"></div>
                        <p class="loading-text">Optimizing your image...</p>
                    </div>

                    <div class="results" id="resultsSection">
                        <div class="results-header">
                            <h3 class="results-title">Compression Results</h3>
                        </div>

                        <div class="comparison">
                            <div class="image-card">
                                <div class="image-card-header">Original Image</div>
                                <img id="originalImagePreview" class="image-preview" src="" alt="Original image preview">
                                <div class="image-stats" id="originalSize">Size: 0 KB</div>
                            </div>
                            <div class="image-card">
                                <div class="image-card-header">Compressed Image</div>
                                <img id="compressedImagePreview" class="image-preview" src="" alt="Compressed image preview">
                                <div class="image-stats" id="compressedSize">Size: 0 KB</div>
                            </div>
                        </div>

                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-value" id="sizeReduction">0%</div>
                                <div class="stat-label">Size Reduction</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="qualityAfter">80%</div>
                                <div class="stat-label">Quality</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="timeTaken">0s</div>
                                <div class="stat-label">Time Taken</div>
                            </div>
                        </div>

                        <button id="downloadBtn" class="btn btn-success">
                            <span class="btn-icon">⬇️</span> Download Compressed Image
                        </button>
                    </div>
                </div>
            </div>

            <aside class="ad-section">
                <div class="ad-card">
                    <div class="ad-label">Advertisement</div>
                    <div class="ad-container">
                        <!-- Replace with your Google AdSense code -->
                        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-YOUR_ADSENSE_ID"></script>
                        <!-- ImageCompressor_Responsive_Ad -->
                        <ins class="adsbygoogle"
                             style="display:block"
                             data-ad-client="ca-pub-YOUR_ADSENSE_ID"
                             data-ad-slot="YOUR_AD_SLOT_ID"
                             data-ad-format="auto"
                             data-full-width-responsive="true"></ins>
                        <script>
                             (adsbygoogle = window.adsbygoogle || []).push({});
                        </script>
                    </div>
                </div>

                <div class="ad-card">
                    <div class="ad-label">Advertisement</div>
                    <div class="ad-container">
                        <!-- Second ad slot -->
                        <ins class="adsbygoogle"
                             style="display:block"
                             data-ad-client="ca-pub-YOUR_ADSENSE_ID"
                             data-ad-slot="ANOTHER_AD_SLOT_ID"
                             data-ad-format="auto"
                             data-full-width-responsive="true"></ins>
                        <script>
                             (adsbygoogle = window.adsbygoogle || []).push({});
                        </script>
                    </div>
                </div>
            </aside>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-links">
                    <a href="#" class="footer-link">Privacy Policy</a>
                    <a href="#" class="footer-link">Terms of Service</a>
                    <a href="#" class="footer-link">Contact Us</a>
                </div>
                <p class="copyright">© 2023 ImageCompress Pro. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM elements
            const fileInput = document.getElementById('fileInput');
            const dropArea = document.getElementById('dropArea');
            const compressBtn = document.getElementById('compressBtn');
            const qualitySlider = document.getElementById('qualitySlider');
            const qualityValue = document.getElementById('qualityValue');
            const loadingIndicator = document.getElementById('loadingIndicator');
            const resultsSection = document.getElementById('resultsSection');
            const originalImagePreview = document.getElementById('originalImagePreview');
            const compressedImagePreview = document.getElementById('compressedImagePreview');
            const originalSize = document.getElementById('originalSize');
            const compressedSize = document.getElementById('compressedSize');
            const sizeReduction = document.getElementById('sizeReduction');
            const qualityAfter = document.getElementById('qualityAfter');
            const timeTaken = document.getElementById('timeTaken');
            const downloadBtn = document.getElementById('downloadBtn');
            
            // Variables
            let selectedFile = null;
            let compressedBlob = null;
            let startTime = null;
            
            // Event listeners
            dropArea.addEventListener('click', () => fileInput.click());
            
            fileInput.addEventListener('change', (e) => {
                if (e.target.files.length) {
                    handleFileSelection(e.target.files[0]);
                }
            });
            
            // Drag and drop functionality
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropArea.addEventListener(eventName, preventDefaults, false);
            });
            
            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }
            
            ['dragenter', 'dragover'].forEach(eventName => {
                dropArea.addEventListener(eventName, highlight, false);
            });
            
            ['dragleave', 'drop'].forEach(eventName => {
                dropArea.addEventListener(eventName, unhighlight, false);
            });
            
            function highlight() {
                dropArea.classList.add('active');
            }
            
            function unhighlight() {
                dropArea.classList.remove('active');
            }
            
            dropArea.addEventListener('drop', (e) => {
                const dt = e.dataTransfer;
                const file = dt.files[0];
                handleFileSelection(file);
            });
            
            qualitySlider.addEventListener('input', updateQualityDisplay);
            
            compressBtn.addEventListener('click', compressImage);
            downloadBtn.addEventListener('click', downloadCompressedImage);
            
            // Functions
            function updateQualityDisplay() {
                const value = qualitySlider.value;
                qualityValue.textContent = `${value}%`;
            }
            
            function handleFileSelection(file) {
                const validTypes = ['image/jpeg', 'image/png', 'image/webp'];
                
                if (!file || !validTypes.includes(file.type)) {
                    alert('Please select a valid image file (JPG, PNG, or WebP).');
                    return;
                }
                
                selectedFile = file;
                compressBtn.disabled = false;
                
                // Preview original image
                const reader = new FileReader();
                reader.onload = (e) => {
                    originalImagePreview.src = e.target.result;
                    originalSize.textContent = `Size: ${formatFileSize(file.size)}`;
                };
                reader.readAsDataURL(file);
                
                // Hide results if showing from previous compression
                resultsSection.style.display = 'none';
            }
            
            function compressImage() {
                if (!selectedFile) return;
                
                startTime = performance.now();
                loadingIndicator.style.display = 'block';
                compressBtn.disabled = true;
                
                const quality = parseInt(qualitySlider.value) / 100;
                const outputFormat = document.querySelector('input[name="outputFormat"]:checked').value;
                
                // Use setTimeout to allow UI to update before heavy computation
                setTimeout(() => {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const img = new Image();
                        img.onload = () => {
                            const canvas = document.createElement('canvas');
                            const ctx = canvas.getContext('2d');
                            
                            // Calculate new dimensions if needed (for very large images)
                            const maxDimension = 2500;
                            let width = img.width;
                            let height = img.height;
                            
                            if (width > maxDimension || height > maxDimension) {
                                if (width > height) {
                                    height *= maxDimension / width;
                                    width = maxDimension;
                                } else {
                                    width *= maxDimension / height;
                                    height = maxDimension;
                                }
                            }
                            
                            canvas.width = width;
                            canvas.height = height;
                            
                            // Draw image with higher quality downscaling
                            ctx.imageSmoothingQuality = 'high';
                            ctx.drawImage(img, 0, 0, width, height);
                            
                            // Determine output format
                            let mimeType = selectedFile.type;
                            if (outputFormat !== 'original') {
                                mimeType = `image/${outputFormat}`;
                            }
                            
                            // Convert to blob with specified quality
                            canvas.toBlob((blob) => {
                                compressedBlob = blob;
                                const endTime = performance.now();
                                const timeElapsed = ((endTime - startTime) / 1000).toFixed(1);
                                
                                // Update UI with results
                                compressedImagePreview.src = URL.createObjectURL(blob);
                                compressedSize.textContent = `Size: ${formatFileSize(blob.size)}`;
                                
                                const reduction = ((selectedFile.size - blob.size) / selectedFile.size * 100).toFixed(1);
                                sizeReduction.textContent = `${reduction}%`;
                                qualityAfter.textContent = `${qualitySlider.value}%`;
                                timeTaken.textContent = `${timeElapsed}s`;
                                
                                loadingIndicator.style.display = 'none';
                                resultsSection.style.display = 'block';
                                compressBtn.disabled = false;
                                
                                // Scroll to results smoothly
                                resultsSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                            }, mimeType, quality);
                        };
                        img.onerror = () => {
                            alert('Error loading image. Please try another file.');
                            loadingIndicator.style.display = 'none';
                            compressBtn.disabled = false;
                        };
                        img.src = e.target.result;
                    };
                    reader.readAsDataURL(selectedFile);
                }, 100);
            }
            
            function downloadCompressedImage() {
                if (!compressedBlob) return;
                
                const url = URL.createObjectURL(compressedBlob);
                const a = document.createElement('a');
                a.href = url;
                
                // Determine file extension
                let extension = 'jpg';
                if (compressedBlob.type === 'image/png') extension = 'png';
                if (compressedBlob.type === 'image/webp') extension = 'webp';
                
                // Create filename
                const originalName = selectedFile.name.replace(/\.[^/.]+$/, "");
                a.download = `${originalName}-optimized.${extension}`;
                
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }
            
            function formatFileSize(bytes) {
                if (bytes === 0) return '0 Bytes';
                
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }
        });
    </script>
</body>
</html>
